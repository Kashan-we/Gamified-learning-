<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuestLearn | Gamified Learning Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¯</text></svg>">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-gamepad"></i>
                <span class="logo-text">Quest<span class="logo-highlight">Learn</span></span>
            </div>
            <ul class="nav-menu">
                <li><a href="#hero" class="nav-link active">Home</a></li>
                <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
                <li><a href="#subjects" class="nav-link">Subjects</a></li>
                <li><a href="#leaderboard" class="nav-link">Leaderboard</a></li>
                <li><a href="#achievements" class="nav-link">Achievements</a></li>
            </ul>
            <div class="nav-user">
                <div class="user-avatar">
                    <i class="fas fa-user-astronaut"></i>
                    <span class="user-level">Lv. <span id="user-level-display">1</span></span>
                </div>
                <div class="user-info">
                    <span class="user-name" id="username-display">Learner</span>
                    <div class="user-xp">
                        <div class="xp-bar">
                            <div class="xp-progress" id="xp-progress-bar"></div>
                        </div>
                        <span class="xp-text"><span id="current-xp">0</span>/<span id="max-xp">100</span> XP</span>
                    </div>
                </div>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-badge">ðŸŽ® Level Up Your Learning</div>
                <h1 class="hero-title">Learn Like You're <span class="text-gradient">Playing</span> A Game</h1>
                <p class="hero-description">QuestLearn transforms education into an epic adventure. Earn XP, unlock achievements, climb leaderboards, and master subjects through gamified challenges.</p>
                <div class="hero-cta">
                    <button class="btn-primary" id="start-learning-btn">
                        <i class="fas fa-play-circle"></i> Start Learning Journey
                    </button>
                    <button class="btn-secondary" id="explore-subjects-btn">
                        <i class="fas fa-compass"></i> Explore Subjects
                    </button>
                </div>
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-learners">12,847</div>
                        <div class="stat-label">Active Learners</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-questions">58,632</div>
                        <div class="stat-label">Questions Mastered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-xp-earned">2.1M</div>
                        <div class="stat-label">Total XP Earned</div>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="floating-card card-1">
                    <div class="card-icon"><i class="fas fa-crown"></i></div>
                    <div class="card-title">Top Rank</div>
                    <div class="card-value">Legend</div>
                </div>
                <div class="floating-card card-2">
                    <div class="card-icon"><i class="fas fa-fire"></i></div>
                    <div class="card-title">Current Streak</div>
                    <div class="card-value">7 Days</div>
                </div>
                <div class="floating-card card-3">
                    <div class="card-icon"><i class="fas fa-trophy"></i></div>
                    <div class="card-title">Badges</div>
                    <div class="card-value">24</div>
                </div>
                <div class="main-visual">
                    <div class="visual-container">
                        <div class="level-circle">
                            <div class="level-inner">
                                <span class="level-number">5</span>
                                <span class="level-text">Level</span>
                            </div>
                        </div>
                        <div class="visual-xp">
                            <div class="xp-tag">+150 XP</div>
                            <div class="xp-tag">+100 XP</div>
                            <div class="xp-tag">+200 XP</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section class="dashboard-section" id="dashboard">
        <div class="section-header">
            <h2 class="section-title">Your <span class="text-gradient">Learning Dashboard</span></h2>
            <p class="section-subtitle">Track your progress, achievements, and learning statistics</p>
        </div>
        <div class="dashboard-container">
            <div class="dashboard-grid">
                <!-- Stats Overview -->
                <div class="dashboard-card wide-card">
                    <div class="card-header">
                        <h3 class="card-title">Learning Stats</h3>
                        <div class="card-badge">Live</div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="total-points">0</div>
                                <div class="stat-label">Total Points</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="rank-display">Beginner</div>
                                <div class="stat-label">Current Rank</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="streak-display">0</div>
                                <div class="stat-label">Day Streak</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="learning-time">0</div>
                                <div class="stat-label">Hours Learned</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Overview -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Subject Progress</h3>
                    </div>
                    <div class="progress-list">
                        <div class="progress-item">
                            <div class="progress-subject">
                                <div class="subject-icon">
                                    <i class="fas fa-laptop-code"></i>
                                </div>
                                <span class="subject-name">Computer Science</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="65" id="cs-progress"></div>
                            </div>
                            <span class="progress-value">65%</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-subject">
                                <div class="subject-icon">
                                    <i class="fas fa-calculator"></i>
                                </div>
                                <span class="subject-name">Mathematics</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="40" id="math-progress"></div>
                            </div>
                            <span class="progress-value">40%</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-subject">
                                <div class="subject-icon">
                                    <i class="fas fa-globe-americas"></i>
                                </div>
                                <span class="subject-name">General Knowledge</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="80" id="gk-progress"></div>
                            </div>
                            <span class="progress-value">80%</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-subject">
                                <div class="subject-icon">
                                    <i class="fas fa-flask"></i>
                                </div>
                                <span class="subject-name">Science</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="25" id="science-progress"></div>
                            </div>
                            <span class="progress-value">25%</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Activity</h3>
                    </div>
                    <div class="activity-list" id="activity-list">
                        <!-- Activity items will be added by JavaScript -->
                    </div>
                </div>

                <!-- Level Progress -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Level Progress</h3>
                    </div>
                    <div class="level-container">
                        <div class="level-info">
                            <div class="level-current">
                                <div class="level-label">Current Level</div>
                                <div class="level-value">Lv. <span id="current-level">1</span></div>
                            </div>
                            <div class="level-next">
                                <div class="level-label">Next Level</div>
                                <div class="level-value">Lv. <span id="next-level">2</span></div>
                            </div>
                        </div>
                        <div class="level-progress-bar">
                            <div class="level-progress-fill" id="level-progress-fill"></div>
                        </div>
                        <div class="level-xp">
                            <span id="current-level-xp">0</span> / <span id="next-level-xp">100</span> XP
                        </div>
                        <div class="level-reward">
                            <i class="fas fa-gift"></i>
                            <span>Next Reward: <strong>Advanced Badge</strong></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Subjects Section -->
    <section class="subjects-section" id="subjects">
        <div class="section-header">
            <h2 class="section-title">Learning <span class="text-gradient">Subjects</span></h2>
            <p class="section-subtitle">Choose a subject and start your gamified learning journey</p>
        </div>
        <div class="subjects-container">
            <div class="subjects-grid">
                <!-- Computer Science -->
                <div class="subject-card" data-subject="cs">
                    <div class="subject-card-header">
                        <div class="subject-icon-large">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="subject-difficulty">
                            <span class="difficulty-label">Difficulty</span>
                            <div class="difficulty-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <h3 class="subject-card-title">Computer Science</h3>
                    <p class="subject-card-description">Master programming, algorithms, data structures, and computer science fundamentals through interactive challenges.</p>
                    <div class="subject-stats">
                        <div class="subject-stat">
                            <div class="stat-count">15</div>
                            <div class="stat-label">Levels</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">320</div>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">5,000</div>
                            <div class="stat-label">Max XP</div>
                        </div>
                    </div>
                    <button class="subject-start-btn" data-subject="cs">
                        <i class="fas fa-play"></i> Start Learning
                    </button>
                    <div class="subject-progress">
                        <div class="progress-label">Your Progress</div>
                        <div class="subject-progress-bar">
                            <div class="subject-progress-fill" data-progress="65"></div>
                        </div>
                        <div class="progress-percentage">65%</div>
                    </div>
                </div>

                <!-- Mathematics -->
                <div class="subject-card" data-subject="math">
                    <div class="subject-card-header">
                        <div class="subject-icon-large">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="subject-difficulty">
                            <span class="difficulty-label">Difficulty</span>
                            <div class="difficulty-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                    <h3 class="subject-card-title">Mathematics</h3>
                    <p class="subject-card-description">Solve mathematical puzzles, equations, and problems. From algebra to calculus, level up your math skills.</p>
                    <div class="subject-stats">
                        <div class="subject-stat">
                            <div class="stat-count">12</div>
                            <div class="stat-label">Levels</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">280</div>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">4,200</div>
                            <div class="stat-label">Max XP</div>
                        </div>
                    </div>
                    <button class="subject-start-btn" data-subject="math">
                        <i class="fas fa-play"></i> Start Learning
                    </button>
                    <div class="subject-progress">
                        <div class="progress-label">Your Progress</div>
                        <div class="subject-progress-bar">
                            <div class="subject-progress-fill" data-progress="40"></div>
                        </div>
                        <div class="progress-percentage">40%</div>
                    </div>
                </div>

                <!-- General Knowledge -->
                <div class="subject-card" data-subject="gk">
                    <div class="subject-card-header">
                        <div class="subject-icon-large">
                            <i class="fas fa-globe-americas"></i>
                        </div>
                        <div class="subject-difficulty">
                            <span class="difficulty-label">Difficulty</span>
                            <div class="difficulty-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <h3 class="subject-card-title">General Knowledge</h3>
                    <p class="subject-card-description">Expand your knowledge about world history, geography, culture, and current affairs through trivia challenges.</p>
                    <div class="subject-stats">
                        <div class="subject-stat">
                            <div class="stat-count">10</div>
                            <div class="stat-label">Levels</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">250</div>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="subject-stat">
                            <div class="stat-count">3,500</div>
                            <div class="stat-label">Max XP</div>
                        </div>
                    </div>
                    <button class="subject-start-btn" data-subject="gk">
                        <i class="fas fa-play"></i> Start Learning
                    </button>
                    <div class="subject-progress">
                        <div class="progress-label">Your Progress</div>
                        <div class="subject-progress-bar">
                            <div class="subject-progress-fill" data-progress="80"></div>
                        </div>
                        <div class="progress-percentage">80%</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz Modal -->
    <div class="quiz-modal" id="quiz-modal">
        <div class="quiz-modal-content">
            <div class="quiz-header">
                <div class="quiz-subject-info">
                    <h3 class="quiz-subject-title" id="quiz-subject-title">Computer Science</h3>
                    <div class="quiz-level">Level <span id="quiz-level">1</span></div>
                </div>
                <div class="quiz-stats">
                    <div class="quiz-stat">
                        <span class="stat-label">Questions</span>
                        <span class="stat-value" id="current-question">1</span>/<span id="total-questions">5</span>
                    </div>
                    <div class="quiz-stat">
                        <span class="stat-label">Score</span>
                        <span class="stat-value" id="quiz-score">0</span>
                    </div>
                    <div class="quiz-stat">
                        <span class="stat-label">Time</span>
                        <span class="stat-value" id="quiz-timer">60</span>s
                    </div>
                </div>
                <button class="close-quiz-btn" id="close-quiz-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="quiz-body">
                <div class="quiz-question-container">
                    <div class="question-text" id="question-text">
                        What does HTML stand for?
                    </div>
                    <div class="question-type-badge" id="question-type">Multiple Choice</div>
                </div>
                <div class="quiz-options" id="quiz-options">
                    <!-- Options will be populated by JavaScript -->
                </div>
                <div class="quiz-feedback" id="quiz-feedback">
                    <div class="feedback-content" id="feedback-content"></div>
                    <button class="next-question-btn" id="next-question-btn">Next Question <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
            <div class="quiz-footer">
                <div class="quiz-xp">
                    <i class="fas fa-star"></i>
                    <span>XP Earned: <strong id="xp-earned">0</strong></span>
                </div>
                <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" id="quiz-progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Section -->
    <section class="leaderboard-section" id="leaderboard">
        <div class="section-header">
            <h2 class="section-title">Global <span class="text-gradient">Leaderboard</span></h2>
            <p class="section-subtitle">See how you rank among learners worldwide</p>
        </div>
        <div class="leaderboard-container">
            <div class="leaderboard-header">
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" data-period="weekly">Weekly</button>
                    <button class="leaderboard-tab" data-period="monthly">Monthly</button>
                    <button class="leaderboard-tab" data-period="alltime">All Time</button>
                </div>
                <div class="leaderboard-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search learners..." id="leaderboard-search">
                </div>
            </div>
            <div class="leaderboard-table">
                <div class="leaderboard-row header-row">
                    <div class="rank-col">Rank</div>
                    <div class="user-col">Learner</div>
                    <div class="level-col">Level</div>
                    <div class="xp-col">Total XP</div>
                    <div class="streak-col">Streak</div>
                    <div class="badges-col">Badges</div>
                </div>
                <div class="leaderboard-rows" id="leaderboard-rows">
                    <!-- Leaderboard rows will be populated by JavaScript -->
                </div>
            </div>
            <div class="leaderboard-user-position">
                <div class="user-position-label">Your Position</div>
                <div class="user-position-rank">#<span id="user-rank">15</span></div>
                <div class="user-position-name" id="user-position-name">You</div>
                <div class="user-position-xp"><span id="user-position-xp">1,250</span> XP</div>
            </div>
        </div>
    </section>

    <!-- Achievements Section -->
    <section class="achievements-section" id="achievements">
        <div class="section-header">
            <h2 class="section-title">Your <span class="text-gradient">Achievements</span></h2>
            <p class="section-subtitle">Unlock badges and achievements by completing challenges</p>
        </div>
        <div class="achievements-container">
            <div class="achievements-stats">
                <div class="achievement-stat">
                    <div class="achievement-stat-value" id="total-badges">0</div>
                    <div class="achievement-stat-label">Badges Earned</div>
                </div>
                <div class="achievement-stat">
                    <div class="achievement-stat-value" id="total-achievements">0</div>
                    <div class="achievement-stat-label">Achievements Unlocked</div>
                </div>
                <div class="achievement-stat">
                    <div class="achievement-stat-value" id="completion-rate">0%</div>
                    <div class="achievement-stat-label">Completion Rate</div>
                </div>
            </div>
            <div class="achievements-grid" id="achievements-grid">
                <!-- Achievements will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <div class="footer-logo">
                    <i class="fas fa-gamepad"></i>
                    <span class="logo-text">Quest<span class="logo-highlight">Learn</span></span>
                </div>
                <p class="footer-description">Gamified Learning Platform that makes education an adventure.</p>
                <div class="footer-social">
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-links">
                <div class="footer-link-group">
                    <h4 class="link-group-title">Platform</h4>
                    <a href="#dashboard" class="footer-link">Dashboard</a>
                    <a href="#subjects" class="footer-link">Subjects</a>
                    <a href="#leaderboard" class="footer-link">Leaderboard</a>
                    <a href="#achievements" class="footer-link">Achievements</a>
                </div>
                <div class="footer-link-group">
                    <h4 class="link-group-title">Company</h4>
                    <a href="#" class="footer-link">About Us</a>
                    <a href="#" class="footer-link">Careers</a>
                    <a href="#" class="footer-link">Blog</a>
                    <a href="#" class="footer-link">Contact</a>
                </div>
                <div class="footer-link-group">
                    <h4 class="link-group-title">Support</h4>
                    <a href="#" class="footer-link">Help Center</a>
                    <a href="#" class="footer-link">FAQ</a>
                    <a href="#" class="footer-link">Community</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 QuestLearn. All rights reserved. Made with <i class="fas fa-heart"></i> for gamified education.</p>
        </div>
    </footer>

    <!-- XP Gain Notification -->
    <div class="xp-notification" id="xp-notification">
        <div class="xp-notification-content">
            <i class="fas fa-star"></i>
            <div class="xp-notification-text">
                <div class="xp-notification-title">+150 XP Earned!</div>
                <div class="xp-notification-subtitle">Correct answer streak bonus</div>
            </div>
        </div>
    </div>

    <!-- Level Up Notification -->
    <div class="level-up-modal" id="level-up-modal">
        <div class="level-up-content">
            <div class="level-up-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="level-up-title">Level Up!</h2>
            <div class="level-up-info">
                You've reached <span class="level-up-new" id="new-level">5</span>
            </div>
            <p class="level-up-message">You've unlocked new challenges and rewards. Keep going!</p>
            <button class="level-up-close-btn" id="level-up-close-btn">Continue Learning</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>
```

--- style.css ---

```css
/* ============================================
   QUESTLEARN - GAMIFIED LEARNING PLATFORM
   Modern EdTech Platform with Gaming Aesthetics
   ============================================ */

/* CSS Reset & Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Color Palette */
    --primary-color: #6C63FF;
    --primary-dark: #554FD8;
    --secondary-color: #FF6584;
    --accent-color: #36D1DC;
    --success-color: #4CAF50;
    --warning-color: #FF9800;
    --danger-color: #F44336;
    
    /* Background Colors */
    --bg-dark: #0F0F1E;
    --bg-darker: #0A0A14;
    --bg-card: #1A1A2E;
    --bg-card-light: #232339;
    --bg-overlay: rgba(15, 15, 30, 0.95);
    
    /* Text Colors */
    --text-primary: #FFFFFF;
    --text-secondary: #B0B0D0;
    --text-muted: #8888AA;
    
    /* Borders & Shadows */
    --border-color: #2A2A45;
    --border-radius: 12px;
    --border-radius-lg: 20px;
    --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.3);
    --glow-primary: 0 0 20px rgba(108, 99, 255, 0.5);
    --glow-secondary: 0 0 20px rgba(255, 101, 132, 0.5);
    
    /* Transitions */
    --transition-fast: 0.2s ease;
    --transition-medium: 0.3s ease;
    --transition-slow: 0.5s ease;
    
    /* Spacing */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
    --spacing-xxl: 5rem;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    line-height: 1.2;
}

.text-gradient {
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    display: inline-block;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--spacing-md);
}

/* Section Styles */
.section-header {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.section-title {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-sm);
    letter-spacing: 1px;
}

.section-subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
    max-width: 700px;
    margin: 0 auto;
}

/* Button Styles */
.btn-primary, .btn-secondary, .subject-start-btn, .next-question-btn, .level-up-close-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.75rem;
    border-radius: var(--border-radius);
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all var(--transition-medium);
    border: none;
    outline: none;
    font-family: 'Poppins', sans-serif;
}

.btn-primary {
    background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
    color: white;
    box-shadow: var(--glow-primary);
}

.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(108, 99, 255, 0.4);
}

.btn-secondary {
    background-color: transparent;
    color: var(--text-primary);
    border: 2px solid var(--border-color);
}

.btn-secondary:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    box-shadow: var(--glow-primary);
}

.subject-start-btn {
    width: 100%;
    background-color: var(--bg-card-light);
    color: var(--text-primary);
    border: 2px solid var(--border-color);
    margin-top: var(--spacing-md);
}

.subject-start-btn:hover {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    transform: translateY(-3px);
}

.next-question-btn {
    background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
    color: white;
    margin-top: var(--spacing-md);
}

.next-question-btn:hover {
    transform: translateX(5px);
}

.level-up-close-btn {
    background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
    color: white;
    margin-top: var(--spacing-lg);
    padding: 1rem 2rem;
    font-size: 1.1rem;
}

.level-up-close-btn:hover {
    transform: scale(1.05);
}

/* Navigation */
.navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: rgba(15, 15, 30, 0.9);
    backdrop-filter: blur(10px);
    z-index: 1000;
    border-bottom: 1px solid var(--border-color);
}

.nav-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem var(--spacing-lg);
    max-width: 1400px;
    margin: 0 auto;
}

.nav-logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--text-primary);
}

.nav-logo i {
    color: var(--primary-color);
    font-size: 1.8rem;
}

.logo-text {
    font-family: 'Orbitron', sans-serif;
}

.logo-highlight {
    color: var(--primary-color);
}

.nav-menu {
    display: flex;
    list-style: none;
    gap: 2rem;
}

.nav-link {
    color: var(--text-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color var(--transition-fast);
    position: relative;
}

.nav-link:hover, .nav-link.active {
    color: var(--text-primary);
}

.nav-link.active::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 3px;
}

.nav-user {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-avatar {
    position: relative;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.user-level {
    position: absolute;
    bottom: -5px;
    right: -5px;
    background-color: var(--bg-darker);
    color: var(--primary-color);
    font-size: 0.7rem;
    font-weight: 700;
    padding: 0.2rem 0.4rem;
    border-radius: 10px;
    border: 2px solid var(--primary-color);
}

.user-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.user-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.user-xp {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.xp-bar {
    width: 100px;
    height: 6px;
    background-color: var(--bg-card-light);
    border-radius: 3px;
    overflow: hidden;
}

.xp-progress {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    width: 30%;
    border-radius: 3px;
    transition: width var(--transition-slow);
}

.xp-text {
    font-size: 0.8rem;
    color: var(--text-muted);
    min-width: 60px;
}

.mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
}

/* Hero Section */
.hero {
    padding: 8rem var(--spacing-lg) 6rem;
    background: linear-gradient(180deg, var(--bg-dark) 0%, var(--bg-darker) 100%);
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 20% 50%, rgba(108, 99, 255, 0.1) 0%, transparent 50%);
}

.hero-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1400px;
    margin: 0 auto;
    gap: var(--spacing-xl);
}

.hero-content {
    flex: 1;
    max-width: 600px;
}

.hero-badge {
    display: inline-block;
    background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: var(--spacing-md);
    box-shadow: var(--glow-primary);
}

.hero-title {
    font-size: 3.5rem;
    margin-bottom: var(--spacing-md);
    line-height: 1.1;
}

.hero-description {
    font-size: 1.2rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xl);
    line-height: 1.7;
}

.hero-cta {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.hero-stats {
    display: flex;
    gap: var(--spacing-lg);
}

.stat-card {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.stat-value {
    font-size: 2.5rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.stat-label {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.hero-visual {
    flex: 1;
    position: relative;
    min-height: 400px;
}

.floating-card {
    position: absolute;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    width: 160px;
    box-shadow: var(--shadow-md);
    z-index: 2;
    animation: float 6s ease-in-out infinite;
}

.floating-card.card-1 {
    top: 0;
    right: 0;
    animation-delay: 0s;
}

.floating-card.card-2 {
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    animation-delay: 2s;
}

.floating-card.card-3 {
    bottom: 0;
    right: 20%;
    animation-delay: 4s;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

.card-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: var(--primary-color);
}

.card-title {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.card-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.main-visual {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 300px;
    z-index: 1;
}

.visual-container {
    position: relative;
    width: 100%;
    height: 100%;
}

.level-circle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    background: conic-gradient(var(--primary-color) 0% 65%, var(--bg-card-light) 65% 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--glow-primary);
}

.level-circle::before {
    content: '';
    position: absolute;
    width: 180px;
    height: 180px;
    background-color: var(--bg-card);
    border-radius: 50%;
}

.level-inner {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.level-number {
    font-size: 4rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.level-text {
    font-size: 1rem;
    color: var(--text-secondary);
    letter-spacing: 2px;
}

.visual-xp {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.xp-tag {
    position: absolute;
    background: linear-gradient(90deg, var(--secondary-color), #FF8E53);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.9rem;
    animation: xpFloat 4s linear infinite;
    opacity: 0;
}

.xp-tag:nth-child(1) {
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.xp-tag:nth-child(2) {
    top: 70%;
    right: 10%;
    animation-delay: 1.3s;
}

.xp-tag:nth-child(3) {
    top: 40%;
    left: 5%;
    animation-delay: 2.6s;
}

@keyframes xpFloat {
    0% {
        transform: translateY(0) scale(0.8);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-100px) scale(1);
        opacity: 0;
    }
}

/* Dashboard Section */
.dashboard-section {
    padding: var(--spacing-xxl) var(--spacing-lg);
    background-color: var(--bg-darker);
}

.dashboard-container {
    max-width: 1400px;
    margin: 0 auto;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-lg);
}

.dashboard-card {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-md);
    transition: transform var(--transition-medium), box-shadow var(--transition-medium);
}

.dashboard-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.dashboard-card.wide-card {
    grid-column: span 2;
}

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-md);
}

.card-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.card-badge {
    background-color: var(--primary-color);
    color: white;
    font-size: 0.8rem;
    font-weight: 600;
    padding: 0.25rem 0.75rem;
    border-radius: 50px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-md);
}

.stat-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
}

.stat-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.stat-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.stat-value {
    font-size: 1.8rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    color: var(--text-primary);
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-muted);
}

.progress-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.progress-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

.progress-subject {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    min-width: 180px;
}

.subject-icon {
    width: 40px;
    height: 40px;
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.2rem;
}

.subject-name {
    font-weight: 600;
    color: var(--text-primary);
}

.progress-bar {
    flex: 1;
    height: 10px;
    background-color: var(--bg-card-light);
    border-radius: 5px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 5px;
    width: 0;
    transition: width 1.5s ease-out;
}

.progress-value {
    min-width: 50px;
    text-align: right;
    font-weight: 700;
    color: var(--primary-color);
}

.activity-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-height: 300px;
    overflow-y: auto;
    padding-right: var(--spacing-sm);
}

.activity-list::-webkit-scrollbar {
    width: 6px;
}

.activity-list::-webkit-scrollbar-track {
    background: var(--bg-card-light);
    border-radius: 10px;
}

.activity-list::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 10px;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    border-left: 4px solid var(--primary-color);
}

.activity-icon {
    width: 40px;
    height: 40px;
    background-color: rgba(108, 99, 255, 0.1);
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.2rem;
}

.activity-content {
    flex: 1;
}

.activity-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.activity-time {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.activity-xp {
    font-weight: 700;
    color: var(--primary-color);
    font-size: 0.9rem;
}

.level-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.level-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.level-current, .level-next {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
}

.level-label {
    font-size: 0.9rem;
    color: var(--text-muted);
}

.level-value {
    font-size: 2rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    color: var(--text-primary);
}

.level-progress-bar {
    height: 12px;
    background-color: var(--bg-card-light);
    border-radius: 6px;
    overflow: hidden;
}

.level-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 6px;
    width: 0;
    transition: width 1.5s ease-out;
}

.level-xp {
    text-align: center;
    font-weight: 600;
    color: var(--text-secondary);
}

.level-reward {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: var(--spacing-sm);
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    border: 1px dashed var(--primary-color);
    color: var(--text-primary);
}

.level-reward i {
    color: var(--warning-color);
}

/* Subjects Section */
.subjects-section {
    padding: var(--spacing-xxl) var(--spacing-lg);
    background-color: var(--bg-dark);
    position: relative;
    overflow: hidden;
}

.subjects-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 80% 20%, rgba(54, 209, 220, 0.05) 0%, transparent 50%);
}

.subjects-container {
    max-width: 1400px;
    margin: 0 auto;
}

.subjects-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-lg);
}

.subject-card {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-medium), box-shadow var(--transition-medium);
    position: relative;
    overflow: hidden;
}

.subject-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
}

.subject-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-lg);
}

.subject-card-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: var(--spacing-md);
}

.subject-icon-large {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
}

.subject-difficulty {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.25rem;
}

.difficulty-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.difficulty-stars {
    display: flex;
    gap: 0.1rem;
    color: var(--warning-color);
    font-size: 0.9rem;
}

.subject-card-title {
    font-size: 1.8rem;
    margin-bottom: var(--spacing-sm);
    color: var(--text-primary);
}

.subject-card-description {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-lg);
    flex: 1;
}

.subject-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md) 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}

.subject-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
}

.stat-count {
    font-size: 1.8rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    color: var(--text-primary);
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-muted);
}

.subject-progress {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-md);
}

.progress-label {
    font-size: 0.9rem;
    color: var(--text-muted);
    min-width: 100px;
}

.subject-progress-bar {
    flex: 1;
    height: 8px;
    background-color: var(--bg-card-light);
    border-radius: 4px;
    overflow: hidden;
}

.subject-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 4px;
    width: 0;
    transition: width 1.5s ease-out;
}

.progress-percentage {
    font-weight: 700;
    color: var(--primary-color);
    min-width: 50px;
    text-align: right;
}

/* Quiz Modal */
.quiz-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-overlay);
    backdrop-filter: blur(10px);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-md);
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-medium), visibility var(--transition-medium);
}

.quiz-modal.active {
    opacity: 1;
    visibility: visible;
}

.quiz-modal-content {
    background-color: var(--bg-card);
    border-radius: var(--border-radius-lg);
    width: 100%;
    max-width: 800px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    transform: translateY(30px);
    transition: transform var(--transition-medium);
}

.quiz-modal.active .quiz-modal-content {
    transform: translateY(0);
}

.quiz-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border-bottom: 1px solid var(--border-color);
}

.quiz-subject-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

.quiz-subject-title {
    font-size: 1.5rem;
    color: var(--text-primary);
}

.quiz-level {
    background-color: var(--primary-color);
    color: white;
    font-weight: 700;
    padding: 0.25rem 0.75rem;
    border-radius: 50px;
    font-size: 0.9rem;
}

.quiz-stats {
    display: flex;
    gap: var(--spacing-lg);
}

.quiz-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
}

.stat-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.stat-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
}

.close-quiz-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    transition: color var(--transition-fast);
}

.close-quiz-btn:hover {
    color: var(--danger-color);
}

.quiz-body {
    padding: var(--spacing-xl);
}

.quiz-question-container {
    margin-bottom: var(--spacing-xl);
}

.question-text {
    font-size: 1.5rem;
    line-height: 1.5;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.question-type-badge {
    display: inline-block;
    background-color: rgba(108, 99, 255, 0.1);
    color: var(--primary-color);
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 600;
}

.quiz-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.quiz-option {
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    font-size: 1.1rem;
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
    color: var(--text-primary);
}

.quiz-option:hover {
    border-color: var(--primary-color);
    transform: translateY(-3px);
}

.quiz-option.selected {
    border-color: var(--primary-color);
    background-color: rgba(108, 99, 255, 0.1);
    box-shadow: var(--glow-primary);
}

.quiz-option.correct {
    border-color: var(--success-color);
    background-color: rgba(76, 175, 80, 0.1);
}

.quiz-option.incorrect {
    border-color: var(--danger-color);
    background-color: rgba(244, 67, 54, 0.1);
}

.quiz-feedback {
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    border-left: 5px solid var(--primary-color);
    display: none;
}

.quiz-feedback.active {
    display: block;
    animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.feedback-content {
    font-size: 1.1rem;
    margin-bottom: var(--spacing-md);
    color: var(--text-primary);
}

.quiz-footer {
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.quiz-xp {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.quiz-xp i {
    color: var(--warning-color);
}

.quiz-progress-bar {
    flex: 1;
    max-width: 300px;
    height: 8px;
    background-color: var(--bg-darker);
    border-radius: 4px;
    overflow: hidden;
    margin: 0 var(--spacing-lg);
}

.quiz-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 4px;
    width: 0;
    transition: width 0.5s ease-out;
}

/* Leaderboard Section */
.leaderboard-section {
    padding: var(--spacing-xxl) var(--spacing-lg);
    background-color: var(--bg-darker);
}

.leaderboard-container {
    max-width: 1400px;
    margin: 0 auto;
    background-color: var(--bg-card);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

.leaderboard-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border-bottom: 1px solid var(--border-color);
}

.leaderboard-tabs {
    display: flex;
    gap: 0.5rem;
}

.leaderboard-tab {
    padding: 0.75rem 1.5rem;
    background-color: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-secondary);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.leaderboard-tab:hover {
    color: var(--text-primary);
    border-color: var(--primary-color);
}

.leaderboard-tab.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.leaderboard-search {
    display: flex;
    align-items: center;
    background-color: var(--bg-darker);
    border-radius: var(--border-radius);
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    width: 300px;
}

.leaderboard-search i {
    color: var(--text-muted);
    margin-right: 0.5rem;
}

.leaderboard-search input {
    background: none;
    border: none;
    outline: none;
    color: var(--text-primary);
    width: 100%;
    font-family: 'Poppins', sans-serif;
}

.leaderboard-table {
    padding: var(--spacing-lg);
}

.leaderboard-row {
    display: grid;
    grid-template-columns: 80px 1fr 120px 120px 120px 120px;
    align-items: center;
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

.leaderboard-row.header-row {
    font-weight: 700;
    color: var(--text-muted);
    background-color: var(--bg-card-light);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-sm);
}

.leaderboard-rows {
    max-height: 500px;
    overflow-y: auto;
}

.leaderboard-rows::-webkit-scrollbar {
    width: 6px;
}

.leaderboard-rows::-webkit-scrollbar-track {
    background: var(--bg-card-light);
    border-radius: 10px;
}

.leaderboard-rows::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 10px;
}

.leaderboard-row.user-row {
    background-color: rgba(108, 99, 255, 0.05);
    border-radius: var(--border-radius);
    border: 1px solid var(--primary-color);
    margin: var(--spacing-sm) 0;
}

.rank-col {
    font-weight: 700;
    font-size: 1.2rem;
    color: var(--text-primary);
}

.rank-col.top-1 {
    color: gold;
}

.rank-col.top-2 {
    color: silver;
}

.rank-col.top-3 {
    color: #CD7F32;
}

.user-col {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.user-avatar-small {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.user-info-small {
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
}

.user-name-small {
    font-weight: 600;
    color: var(--text-primary);
}

.user-rank-small {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.level-col, .xp-col, .streak-col, .badges-col {
    font-weight: 600;
    color: var(--text-primary);
}

.streak-col {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.streak-col i {
    color: var(--warning-color);
}

.badges-col {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.badges-col i {
    color: var(--warning-color);
}

.leaderboard-user-position {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
    background-color: var(--bg-card-light);
    border-top: 1px solid var(--border-color);
}

.user-position-label {
    font-size: 1.1rem;
    color: var(--text-muted);
}

.user-position-rank {
    font-size: 2rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    color: var(--primary-color);
}

.user-position-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.user-position-xp {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-secondary);
}

/* Achievements Section */
.achievements-section {
    padding: var(--spacing-xxl) var(--spacing-lg);
    background-color: var(--bg-dark);
}

.achievements-container {
    max-width: 1400px;
    margin: 0 auto;
}

.achievements-stats {
    display: flex;
    justify-content: center;
    gap: var(--spacing-xl);
    margin-bottom: var(--spacing-xl);
}

.achievement-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: var(--spacing-lg);
    background-color: var(--bg-card);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    min-width: 200px;
}

.achievement-stat-value {
    font-size: 3rem;
    font-weight: 800;
    font-family: 'Orbitron', sans-serif;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.achievement-stat-label {
    font-size: 1.1rem;
    color: var(--text-secondary);
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-lg);
}

.achievement-card {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--spacing-md);
    transition: transform var(--transition-medium);
    position: relative;
    overflow: hidden;
}

.achievement-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
}

.achievement-card:hover {
    transform: translateY(-5px);
}

.achievement-card.locked {
    opacity: 0.6;
    filter: grayscale(0.8);
}

.achievement-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    margin-bottom: var(--spacing-sm);
}

.achievement-card.locked .achievement-icon {
    background: linear-gradient(135deg, var(--bg-card-light), var(--bg-darker));
    color: var(--text-muted);
}

.achievement-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
}

.achievement-description {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.5;
}

.achievement-xp {
    font-weight: 700;
    color: var(--warning-color);
    background-color: rgba(255, 152, 0, 0.1);
    padding: 0.5rem 1rem;
    border-radius: 50px;
    font-size: 0.9rem;
}

.achievement-status {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.achievement-status.locked {
    background-color: var(--bg-darker);
    color: var(--text-muted);
}

.achievement-status.unlocked {
    background-color: var(--success-color);
    color: white;
}

/* Footer */
.footer {
    background-color: var(--bg-darker);
    border-top: 1px solid var(--border-color);
    padding-top: var(--spacing-xxl);
}

.footer-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--spacing-lg);
    display: flex;
    justify-content: space-between;
    gap: var(--spacing-xl);
    margin-bottom: var(--spacing-xl);
}

.footer-brand {
    flex: 1;
    max-width: 400px;
}

.footer-logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.8rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.footer-logo i {
    color: var(--primary-color);
}

.footer-description {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-lg);
    line-height: 1.7;
}

.footer-social {
    display: flex;
    gap: var(--spacing-md);
}

.social-icon {
    width: 40px;
    height: 40px;
    background-color: var(--bg-card);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    font-size: 1.2rem;
    transition: all var(--transition-fast);
    text-decoration: none;
}

.social-icon:hover {
    background-color: var(--primary-color);
    transform: translateY(-3px);
}

.footer-links {
    flex: 2;
    display: flex;
    justify-content: space-between;
    gap: var(--spacing-lg);
}

.footer-link-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.link-group-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.footer-link {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.footer-link:hover {
    color: var(--primary-color);
}

.footer-bottom {
    text-align: center;
    padding: var(--spacing-lg);
    border-top: 1px solid var(--border-color);
    color: var(--text-muted);
    font-size: 0.9rem;
}

.footer-bottom i {
    color: var(--danger-color);
    margin: 0 0.25rem;
}

/* Notifications */
.xp-notification {
    position: fixed;
    top: 100px;
    right: 20px;
    background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-lg);
    z-index: 3000;
    transform: translateX(400px);
    transition: transform 0.5s ease-out;
    min-width: 300px;
}

.xp-notification.show {
    transform: translateX(0);
}

.xp-notification-content {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

.xp-notification i {
    font-size: 2rem;
    color: gold;
}

.xp-notification-text {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.xp-notification-title {
    font-weight: 700;
    font-size: 1.2rem;
    color: white;
}

.xp-notification-subtitle {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.8);
}

.level-up-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-overlay);
    backdrop-filter: blur(10px);
    z-index: 4000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-md);
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-medium), visibility var(--transition-medium);
}

.level-up-modal.active {
    opacity: 1;
    visibility: visible;
}

.level-up-content {
    background-color: var(--bg-card);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-xxl);
    text-align: center;
    max-width: 500px;
    width: 100%;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
    transform: scale(0.8);
    transition: transform var(--transition-medium);
}

.level-up-modal.active .level-up-content {
    transform: scale(1);
}

.level-up-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: white;
    margin: 0 auto var(--spacing-lg);
    box-shadow: var(--glow-primary);
}

.level-up-title {
    font-size: 3rem;
    margin-bottom: var(--spacing-sm);
    background: linear-gradient(90deg, gold, #FFD700);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.level-up-info {
    font-size: 1.5rem;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.level-up-new {
    font-weight: 800;
    font-size: 2rem;
    color: gold;
}

.level-up-message {
    color: var(--text-secondary);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: var(--spacing-lg);
}

.toast-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 3000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.toast {
    background-color: var(--bg-card);
    border-left: 5px solid var(--primary-color);
    border-radius: var(--border-radius);
    padding: var(--spacing-md);
    min-width: 300px;
    box-shadow: var(--shadow-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    transform: translateX(-400px);
    transition: transform 0.5s ease-out;
}

.toast.show {
    transform: translateX(0);
}

.toast-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.toast-success .toast-icon {
    background-color: rgba(76, 175, 80, 0.1);
    color: var(--success-color);
}

.toast-info .toast-icon {
    background-color: rgba(33, 150, 243, 0.1);
    color: var(--accent-color);
}

.toast-content {
    flex: 1;
}

.toast-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.toast-message {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

/* Responsive Design */
@media (max-width: 1200px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
    
    .dashboard-card.wide-card {
        grid-column: span 1;
    }
    
    .subjects-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .achievements-grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .footer-container {
        flex-direction: column;
    }
    
    .footer-brand {
        max-width: 100%;
    }
}

@media (max-width: 992px) {
    .hero-container {
        flex-direction: column;
        text-align: center;
    }
    
    .hero-content {
        max-width: 100%;
    }
    
    .hero-cta {
        justify-content: center;
    }
    
    .hero-stats {
        justify-content: center;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .leaderboard-row {
        grid-template-columns: 60px 1fr 100px 100px 100px 100px;
    }
    
    .achievements-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .nav-menu {
        display: none;
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    .section-title {
        font-size: 2rem;
    }
    
    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-visual {
        min-height: 300px;
    }
    
    .floating-card {
        width: 130px;
        padding: var(--spacing-sm);
    }
    
    .main-visual {
        width: 250px;
        height: 250px;
    }
    
    .level-circle {
        width: 150px;
        height: 150px;
    }
    
    .level-circle::before {
        width: 130px;
        height: 130px;
    }
    
    .level-number {
        font-size: 3rem;
    }
    
    .quiz-options {
        grid-template-columns: 1fr;
    }
    
    .subjects-grid {
        grid-template-columns: 1fr;
    }
    
    .leaderboard-header {
        flex-direction: column;
        gap: var(--spacing-md);
    }
    
    .leaderboard-search {
        width: 100%;
    }
    
    .leaderboard-row {
        grid-template-columns: 50px 1fr 80px 80px 80px 80px;
        font-size: 0.9rem;
    }
    
    .achievements-grid {
        grid-template-columns: 1fr;
    }
    
    .achievements-stats {
        flex-direction: column;
        align-items: center;
    }
    
    .achievement-stat {
        min-width: 100%;
    }
}

@media (max-width: 576px) {
    .hero-cta {
        flex-direction: column;
    }
    
    .hero-stats {
        flex-direction: column;
        align-items: center;
        gap: var(--spacing-md);
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .leaderboard-tabs {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .leaderboard-user-position {
        flex-direction: column;
        gap: var(--spacing-sm);
    }
}
```

--- script.js ---

```javascript
// ============================================
// QUESTLEARN - GAMIFIED LEARNING PLATFORM
// Complete JavaScript Implementation
// ============================================

// DOM Elements
const DOM = {
    // User Stats
    userLevelDisplay: document.getElementById('user-level-display'),
    usernameDisplay: document.getElementById('username-display'),
    xpProgressBar: document.getElementById('xp-progress-bar'),
    currentXp: document.getElementById('current-xp'),
    maxXp: document.getElementById('max-xp'),
    totalPoints: document.getElementById('total-points'),
    rankDisplay: document.getElementById('rank-display'),
    streakDisplay: document.getElementById('streak-display'),
    learningTime: document.getElementById('learning-time'),
    
    // Progress Bars
    csProgress: document.getElementById('cs-progress'),
    mathProgress: document.getElementById('math-progress'),
    gkProgress: document.getElementById('gk-progress'),
    scienceProgress: document.getElementById('science-progress'),
    
    // Activity List
    activityList: document.getElementById('activity-list'),
    
    // Level Progress
    currentLevel: document.getElementById('current-level'),
    nextLevel: document.getElementById('next-level'),
    levelProgressFill: document.getElementById('level-progress-fill'),
    currentLevelXp: document.getElementById('current-level-xp'),
    nextLevelXp: document.getElementById('next-level-xp'),
    
    // Subject Buttons
    subjectStartBtns: document.querySelectorAll('.subject-start-btn'),
    
    // Quiz Modal
    quizModal: document.getElementById('quiz-modal'),
    quizSubjectTitle: document.getElementById('quiz-subject-title'),
    quizLevel: document.getElementById('quiz-level'),
    currentQuestion: document.getElementById('current-question'),
    totalQuestions: document.getElementById('total-questions'),
    quizScore: document.getElementById('quiz-score'),
    quizTimer: document.getElementById('quiz-timer'),
    questionText: document.getElementById('question-text'),
    questionType: document.getElementById('question-type'),
    quizOptions: document.getElementById('quiz-options'),
    quizFeedback: document.getElementById('quiz-feedback'),
    feedbackContent: document.getElementById('feedback-content'),
    nextQuestionBtn: document.getElementById('next-question-btn'),
    closeQuizBtn: document.getElementById('close-quiz-btn'),
    xpEarned: document.getElementById('xp-earned'),
    quizProgressFill: document.getElementById('quiz-progress-fill'),
    
    // Leaderboard
    leaderboardRows: document.getElementById('leaderboard-rows'),
    userRank: document.getElementById('user-rank'),
    userPositionName: document.getElementById('user-position-name'),
    userPositionXp: document.getElementById('user-position-xp'),
    leaderboardTabs: document.querySelectorAll('.leaderboard-tab'),
    leaderboardSearch: document.getElementById('leaderboard-search'),
    
    // Achievements
    totalBadges: document.getElementById('total-badges'),
    totalAchievements: document.getElementById('total-achievements'),
    completionRate: document.getElementById('completion-rate'),
    achievementsGrid: document.getElementById('achievements-grid'),
    
    // Notifications
    xpNotification: document.getElementById('xp-notification'),
    levelUpModal: document.getElementById('level-up-modal'),
    newLevel: document.getElementById('new-level'),
    levelUpCloseBtn: document.getElementById('level-up-close-btn'),
    toastContainer: document.getElementById('toast-container'),
    
    // Buttons
    startLearningBtn: document.getElementById('start-learning-btn'),
    exploreSubjectsBtn: document.getElementById('explore-subjects-btn'),
    mobileMenuBtn: document.getElementById('mobile-menu-btn'),
    
    // Stats
    totalLearners: document.getElementById('total-learners'),
    totalQuestionsStat: document.getElementById('total-questions'),
    totalXpEarned: document.getElementById('total-xp-earned')
};

// App State
const AppState = {
    // User Data
    user: {
        id: 1,
        name: "Learner",
        level: 1,
        xp: 0,
        totalXp: 0,
        points: 0,
        rank: "Beginner",
        streak: 0,
        learningTime: 0,
        lastLogin: null,
        achievements: []
    },
    
    // Subjects Data
    subjects: {
        cs: {
            name: "Computer Science",
            progress: 65,
            levels: 15,
            currentLevel: 5,
            questionsAnswered: 85,
            totalQuestions: 320
        },
        math: {
            name: "Mathematics",
            progress: 40,
            levels: 12,
            currentLevel: 3,
            questionsAnswered: 72,
            totalQuestions: 280
        },
        gk: {
            name: "General Knowledge",
            progress: 80,
            levels: 10,
            currentLevel: 8,
            questionsAnswered: 120,
            totalQuestions: 250
        },
        science: {
            name: "Science",
            progress: 25,
            levels: 8,
            currentLevel: 2,
            questionsAnswered: 30,
            totalQuestions: 200
        }
    },
    
    // Quiz State
    quiz: {
        active: false,
        subject: null,
        level: 1,
        questions: [],
        currentQuestionIndex: 0,
        score: 0,
        timer: 60,
        timerInterval: null,
        xpEarned: 0,
        correctStreak: 0
    },
    
    // Leaderboard Data
    leaderboard: {
        period: "weekly",
        data: []
    },
    
    // Achievements Data
    achievements: []
};

// XP Requirements per Level
const XP_REQUIREMENTS = [
    0, 100, 250, 500, 850, 1300, 1850, 2500, 3250, 4100,
    5050, 6100, 7250, 8500, 9850, 11300, 12850, 14500, 16250, 18100,
    20050, 22100, 24250, 26500, 28850, 31300, 33850, 36500, 39250, 42100,
    45050, 48100, 51250, 54500, 57850, 61300, 64850, 68500, 72250, 76100,
    80050, 84100, 88250, 92500, 96850, 101300, 105850, 110500, 115250, 120100
];

// Rank Thresholds
const RANK_THRESHOLDS = [
    { xp: 0, rank: "Beginner" },
    { xp: 1000, rank: "Explorer" },
    { xp: 3000, rank: "Scholar" },
    { xp: 7000, rank: "Pro" },
    { xp: 15000, rank: "Expert" },
    { xp: 30000, rank: "Master" },
    { xp: 60000, rank: "Grandmaster" },
    { xp: 100000, rank: "Legend" }
];

// Question Database
const QUESTION_DATABASE = {
    cs: [
        {
            id: 1,
            type: "mcq",
            question: "What does HTML stand for?",
            options: [
                "Hyper Text Markup Language",
                "High Tech Modern Language",
                "Hyper Transfer Markup Language",
                "Home Tool Markup Language"
            ],
            correctAnswer: 0,
            explanation: "HTML stands for Hyper Text Markup Language, which is the standard markup language for creating web pages.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 2,
            type: "mcq",
            question: "Which programming language is known as the 'language of the web'?",
            options: [
                "Python",
                "JavaScript",
                "Java",
                "C++"
            ],
            correctAnswer: 1,
            explanation: "JavaScript is known as the 'language of the web' because it's the primary language for front-end web development.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 3,
            type: "truefalse",
            question: "CSS is used to style web pages.",
            correctAnswer: true,
            explanation: "CSS (Cascading Style Sheets) is used to control the presentation, formatting, and layout of web pages.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 4,
            type: "mcq",
            question: "What is the time complexity of binary search?",
            options: [
                "O(n)",
                "O(n log n)",
                "O(log n)",
                "O(1)"
            ],
            correctAnswer: 2,
            explanation: "Binary search has a time complexity of O(log n) because it divides the search space in half with each iteration.",
            difficulty: 2,
            xp: 15
        },
        {
            id: 5,
            type: "mcq",
            question: "Which data structure uses LIFO (Last In, First Out) principle?",
            options: [
                "Queue",
                "Stack",
                "Array",
                "Linked List"
            ],
            correctAnswer: 1,
            explanation: "Stack uses the LIFO principle, where the last element added is the first one to be removed.",
            difficulty: 2,
            xp: 15
        }
    ],
    math: [
        {
            id: 1,
            type: "mcq",
            question: "What is the value of Ï€ (pi) rounded to two decimal places?",
            options: [
                "3.14",
                "3.16",
                "3.12",
                "3.18"
            ],
            correctAnswer: 0,
            explanation: "The value of Ï€ is approximately 3.14159, which rounds to 3.14 when rounded to two decimal places.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 2,
            type: "truefalse",
            question: "The sum of angles in a triangle is 180 degrees.",
            correctAnswer: true,
            explanation: "In Euclidean geometry, the sum of the interior angles of a triangle always equals 180 degrees.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 3,
            type: "mcq",
            question: "What is the derivative of xÂ²?",
            options: [
                "x",
                "2x",
                "2",
                "xÂ³/3"
            ],
            correctAnswer: 1,
            explanation: "Using the power rule, the derivative of xÂ² is 2x.",
            difficulty: 2,
            xp: 15
        },
        {
            id: 4,
            type: "mcq",
            question: "Solve for x: 2x + 5 = 15",
            options: [
                "5",
                "10",
                "7.5",
                "2.5"
            ],
            correctAnswer: 0,
            explanation: "2x + 5 = 15 â†’ 2x = 10 â†’ x = 5",
            difficulty: 1,
            xp: 10
        },
        {
            id: 5,
            type: "mcq",
            question: "What is the area of a circle with radius 5?",
            options: [
                "25Ï€",
                "10Ï€",
                "50Ï€",
                "5Ï€"
            ],
            correctAnswer: 0,
            explanation: "Area of a circle = Ï€rÂ² = Ï€(5)Â² = 25Ï€",
            difficulty: 2,
            xp: 15
        }
    ],
    gk: [
        {
            id: 1,
            type: "mcq",
            question: "Which planet is known as the Red Planet?",
            options: [
                "Venus",
                "Mars",
                "Jupiter",
                "Saturn"
            ],
            correctAnswer: 1,
            explanation: "Mars is known as the Red Planet due to its reddish appearance caused by iron oxide (rust) on its surface.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 2,
            type: "truefalse",
            question: "The Great Wall of China is visible from space with the naked eye.",
            correctAnswer: false,
            explanation: "This is a common myth. The Great Wall of China is not visible from space with the naked eye.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 3,
            type: "mcq",
            question: "Who painted the Mona Lisa?",
            options: [
                "Vincent van Gogh",
                "Leonardo da Vinci",
                "Pablo Picasso",
                "Michelangelo"
            ],
            correctAnswer: 1,
            explanation: "The Mona Lisa was painted by Leonardo da Vinci during the Renaissance period.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 4,
            type: "mcq",
            question: "What is the capital of Australia?",
            options: [
                "Sydney",
                "Melbourne",
                "Canberra",
                "Perth"
            ],
            correctAnswer: 2,
            explanation: "Canberra is the capital city of Australia, while Sydney and Melbourne are larger cities.",
            difficulty: 1,
            xp: 10
        },
        {
            id: 5,
            type: "mcq",
            question: "Which element has the chemical symbol 'Au'?",
            options: [
                "Silver",
                "Gold",
                "Argon",
                "Aluminum"
            ],
            correctAnswer: 1,
            explanation: "Au is the chemical symbol for Gold, from the Latin word 'aurum'.",
            difficulty: 2,
            xp: 15
        }
    ]
};

// Achievements Database
const ACHIEVEMENTS_DATABASE = [
    {
        id: 1,
        title: "First Steps",
        description: "Complete your first quiz",
        xp: 100,
        icon: "fas fa-baby",
        unlocked: true
    },
    {
        id: 2,
        title: "Quick Learner",
        description: "Answer 10 questions correctly",
        xp: 250,
        icon: "fas fa-bolt",
        unlocked: true
    },
    {
        id: 3,
        title: "Subject Master",
        description: "Complete 100% of any subject",
        xp: 500,
        icon: "fas fa-crown",
        unlocked: false
    },
    {
        id: 4,
        title: "Streak Keeper",
        description: "Maintain a 7-day learning streak",
        xp: 300,
        icon: "fas fa-fire",
        unlocked: true
    },
    {
        id: 5,
        title: "Quiz Champion",
        description: "Score 100% on any quiz",
        xp: 400,
        icon: "fas fa-trophy",
        unlocked: false
    },
    {
        id: 6,
        title: "Early Bird",
        description: "Complete a quiz before 8 AM",
        xp: 150,
        icon: "fas fa-sun",
        unlocked: false
    },
    {
        id: 7,
        title: "Night Owl",
        description: "Complete a quiz after 10 PM",
        xp: 150,
        icon: "fas fa-moon",
        unlocked: false
    },
    {
        id: 8,
        title: "XP Collector",
        description: "Earn 5000 total XP",
        xp: 1000,
        icon: "fas fa-star",
        unlocked: false
    }
];

// Leaderboard Data
const LEADERBOARD_DATA = {
    weekly: [
        { id: 1, name: "Alex Johnson", level: 42, xp: 12500, streak: 14, badges: 28, avatar: "fas fa-user-astronaut" },
        { id: 2, name: "Sam Rivera", level: 38, xp: 11200, streak: 21, badges: 25, avatar: "fas fa-user-ninja" },
        { id: 3, name: "Taylor Swift", level: 35, xp: 9800, streak: 7, badges: 22, avatar: "fas fa-user-graduate" },
        { id: 4, name: "Jordan Lee", level: 31, xp: 8500, streak: 30, badges: 20, avatar: "fas fa-user-secret" },
        { id: 5, name: "Casey Kim", level: 28, xp: 7200, streak: 5, badges: 18, avatar: "fas fa-user-tie" },
        { id: 6, name: "Morgan Patel", level: 25, xp: 6100, streak: 12, badges: 16, avatar: "fas fa-user-md" },
        { id: 7, name: "Riley Chen", level: 22, xp: 5300, streak: 9, badges: 14, avatar: "fas fa-user-injured" },
        { id: 8, name: "Drew Wilson", level: 19, xp: 4200, streak: 3, badges: 12, avatar: "fas fa-user-edit" },
        { id: 9, name: "Skyler Brown", level: 15, xp: 3100, streak: 18, badges: 10, avatar: "fas fa-user-friends" },
        { id: 10, name: "Quinn Davis", level: 12, xp: 2200, streak: 6, badges: 8, avatar: "fas fa-user-check" }
    ],
    monthly: [
        { id: 1, name: "Sam Rivera", level: 38, xp: 11200, streak: 21, badges: 25, avatar: "fas fa-user-ninja" },
        { id: 2, name: "Alex Johnson", level: 42, xp: 12500, streak: 14, badges: 28, avatar: "fas fa-user-astronaut" },
        { id: 3, name: "Jordan Lee", level: 31, xp: 8500, streak: 30, badges: 20, avatar: "fas fa-user-secret" },
        { id: 4, name: "Taylor Swift", level: 35, xp: 9800, streak: 7, badges: 22, avatar: "fas fa-user-graduate" },
        { id: 5, name: "Casey Kim", level: 28, xp: 7200, streak: 5, badges: 18, avatar: "fas fa-user-tie" },
        { id: 6, name: "Morgan Patel", level: 25, xp: 6100, streak: 12, badges: 16, avatar: "fas fa-user-md" },
        { id: 7, name: "Riley Chen", level: 22, xp: 5300, streak: 9, badges: 14, avatar: "fas fa-user-injured" },
        { id: 8, name: "Drew Wilson", level: 19, xp: 4200, streak: 3, badges: 12, avatar: "fas fa-user-edit" },
        { id: 9, name: "Skyler Brown", level: 15, xp: 3100, streak: 18, badges: 10, avatar: "fas fa-user-friends" },
        { id: 10, name: "Quinn Davis", level: 12, xp: 2200, streak: 6, badges: 8, avatar: "fas fa-user-check" }
    ],
    alltime: [
        { id: 1, name: "Alex Johnson", level: 42, xp: 12500, streak: 14, badges: 28, avatar: "fas fa-user-astronaut" },
        { id: 2, name: "Sam Rivera", level: 38, xp: 11200, streak: 21, badges: 25, avatar: "fas fa-user-ninja" },
        { id: 3, name: "Taylor Swift", level: 35, xp: 9800, streak: 7, badges: 22, avatar: "fas fa-user-graduate" },
        { id: 4, name: "Jordan Lee", level: 31, xp: 8500, streak: 30, badges: 20, avatar: "fas fa-user-secret" },
        { id: 5, name: "Casey Kim", level: 28, xp: 7200, streak: 5, badges: 18, avatar: "fas fa-user-tie" },
        { id: 6, name: "Morgan Patel", level: 25, xp: 6100, streak: 12, badges: 16, avatar: "fas fa-user-md" },
        { id: 7, name: "Riley Chen", level: 22, xp: 5300, streak: 9, badges: 14, avatar: "fas fa-user-injured" },
        { id: 8, name: "Drew Wilson", level: 19, xp: 4200, streak: 3, badges: 12, avatar: "fas fa-user-edit" },
        { id: 9, name: "Skyler Brown", level: 15, xp: 3100, streak: 18, badges: 10, avatar: "fas fa-user-friends" },
        { id: 10, name: "Quinn Davis", level: 12, xp: 2200, streak: 6, badges: 8, avatar: "fas fa-user-check" }
    ]
};

// Initialize the application
function initApp() {
    // Load saved state from localStorage
    loadState();
    
    // Initialize UI
    updateUserStats();
    updateProgressBars();
    updateActivityLog();
    updateLevelProgress();
    updateLeaderboard();
    updateAchievements();
    
    // Set up event listeners
    setupEventListeners();
    
    // Set initial values for stats
    updateStats();
    
    // Check for streak update
    checkStreakUpdate();
    
    // Start animation for progress bars
    animateProgressBars();
    
    console.log("QuestLearn initialized successfully!");
}

// Load state from localStorage
function loadState() {
    const savedState = localStorage.getItem('questlearn_state');
    if (savedState) {
        const parsedState = JSON.parse(savedState);
        
        // Merge saved state with default state
        AppState.user = { ...AppState.user, ...parsedState.user };
        AppState.subjects = { ...AppState.subjects, ...parsedState.subjects };
        AppState.achievements = parsedState.achievements || ACHIEVEMENTS_DATABASE;
        
        // Update last login date for streak calculation
        if (!AppState.user.lastLogin) {
            AppState.user.lastLogin = new Date().toISOString().split('T')[0];
        }
    } else {
        // First time user
        AppState.achievements = ACHIEVEMENTS_DATABASE;
        AppState.user.lastLogin = new Date().toISOString().split('T')[0];
        saveState();
    }
}

// Save state to localStorage
function saveState() {
    const stateToSave = {
        user: AppState.user,
        subjects: AppState.subjects,
        achievements: AppState.achievements
    };
    
    localStorage.setItem('questlearn_state', JSON.stringify(stateToSave));
}

// Update user stats in the UI
function updateUserStats() {
    DOM.userLevelDisplay.textContent = AppState.user.level;
    DOM.usernameDisplay.textContent = AppState.user.name;
    
    // Calculate XP progress
    const currentLevelXp = XP_REQUIREMENTS[AppState.user.level - 1] || 0;
    const nextLevelXp = XP_REQUIREMENTS[AppState.user.level] || 100;
    const xpInCurrentLevel = AppState.user.xp - currentLevelXp;
    const xpNeededForNextLevel = nextLevelXp - currentLevelXp;
    const xpPercentage = (xpInCurrentLevel / xpNeededForNextLevel) * 100;
    
    DOM.xpProgressBar.style.width = `${xpPercentage}%`;
    DOM.currentXp.textContent = xpInCurrentLevel;
    DOM.maxXp.textContent = xpNeededForNextLevel;
    
    // Update other stats
    DOM.totalPoints.textContent = AppState.user.points.toLocaleString();
    DOM.rankDisplay.textContent = AppState.user.rank;
    DOM.streakDisplay.textContent = AppState.user.streak;
    DOM.learningTime.textContent = AppState.user.learningTime;
    
    // Update level progress
    DOM.currentLevel.textContent = AppState.user.level;
    DOM.nextLevel.textContent = AppState.user.level + 1;
    DOM.currentLevelXp.textContent = xpInCurrentLevel;
    DOM.nextLevelXp.textContent = xpNeededForNextLevel;
    DOM.levelProgressFill.style.width = `${xpPercentage}%`;
}

// Update progress bars with animation
function animateProgressBars() {
    const progressBars = document.querySelectorAll('.progress-fill, .subject-progress-fill');
    
    progressBars.forEach(bar => {
        const progress = bar.getAttribute('data-progress');
        bar.style.width = `${progress}%`;
    });
}

// Update progress bars based on subject data
function updateProgressBars() {
    DOM.csProgress.style.width = `${AppState.subjects.cs.progress}%`;
    DOM.csProgress.setAttribute('data-progress', AppState.subjects.cs.progress);
    DOM.csProgress.parentElement.nextElementSibling.textContent = `${AppState.subjects.cs.progress}%`;
    
    DOM.mathProgress.style.width = `${AppState.subjects.math.progress}%`;
    DOM.mathProgress.setAttribute('data-progress', AppState.subjects.math.progress);
    DOM.mathProgress.parentElement.nextElementSibling.textContent = `${AppState.subjects.math.progress}%`;
    
    DOM.gkProgress.style.width = `${AppState.subjects.gk.progress}%`;
    DOM.gkProgress.setAttribute('data-progress', AppState.subjects.gk.progress);
    DOM.gkProgress.parentElement.nextElementSibling.textContent = `${AppState.subjects.gk.progress}%`;
    
    DOM.scienceProgress.style.width = `${AppState.subjects.science.progress}%`;
    DOM.scienceProgress.setAttribute('data-progress', AppState.subjects.science.progress);
    DOM.scienceProgress.parentElement.nextElementSibling.textContent = `${AppState.subjects.science.progress}%`;
    
    // Also update subject card progress bars
    document.querySelectorAll('.subject-progress-fill').forEach(bar => {
        const subject = bar.closest('.subject-card').getAttribute('data-subject');
        if (subject && AppState.subjects[subject]) {
            bar.style.width = `${AppState.subjects[subject].progress}%`;
            bar.setAttribute('data-progress', AppState.subjects[subject].progress);
            bar.closest('.subject-progress').querySelector('.progress-percentage').textContent = `${AppState.subjects[subject].progress}%`;
        }
    });
}

// Update activity log
function updateActivityLog() {
    const activities = [
        { 
            icon: "fas fa-laptop-code", 
            title: "Completed Computer Science Quiz", 
            time: "10 minutes ago", 
            xp: "+150 XP" 
        },
        { 
            icon: "fas fa-trophy", 
            title: "Reached Level 5", 
            time: "1 hour ago", 
            xp: "+200 XP" 
        },
        { 
            icon: "fas fa-fire", 
            title: "7-Day Streak Achieved", 
            time: "Yesterday", 
            xp: "+100 XP" 
        },
        { 
            icon: "fas fa-star", 
            title: "Earned 'Quick Learner' Badge", 
            time: "2 days ago", 
            xp: "+250 XP" 
        },
        { 
            icon: "fas fa-calculator", 
            title: "Completed Mathematics Challenge", 
            time: "3 days ago", 
            xp: "+120 XP" 
        }
    ];
    
    DOM.activityList.innerHTML = '';
    
    activities.forEach(activity => {
        const activityItem = document.createElement('div');
        activityItem.className = 'activity-item';
        activityItem.innerHTML = `
            <div class="activity-icon">
                <i class="${activity.icon}"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">${activity.title}</div>
                <div class="activity-time">${activity.time}</div>
            </div>
            <div class="activity-xp">${activity.xp}</div>
        `;
        
        DOM.activityList.appendChild(activityItem);
    });
}

// Update level progress
function updateLevelProgress() {
    const currentLevel = AppState.user.level;
    const nextLevel = currentLevel + 1;
    
    const currentLevelXp = XP_REQUIREMENTS[currentLevel - 1] || 0;
    const nextLevelXp = XP_REQUIREMENTS[currentLevel] || 100;
    const xpInCurrentLevel = AppState.user.xp - currentLevelXp;
    const xpNeededForNextLevel = nextLevelXp - currentLevelXp;
    const xpPercentage = (xpInCurrentLevel / xpNeededForNextLevel) * 100;
    
    DOM.levelProgressFill.style.width = `${xpPercentage}%`;
    DOM.currentLevelXp.textContent = xpInCurrentLevel;
    DOM.nextLevelXp.textContent = xpNeededForNextLevel;
}

// Update leaderboard
function updateLeaderboard() {
    const period = AppState.leaderboard.period;
    const data = LEADERBOARD_DATA[period];
    
    DOM.leaderboardRows.innerHTML = '';
    
    data.forEach((user, index) => {
        const rank = index + 1;
        const row = document.createElement('div');
        row.className = `leaderboard-row ${user.id === AppState.user.id ? 'user-row' : ''}`;
        row.innerHTML = `
            <div class="rank-col ${rank <= 3 ? `top-${rank}` : ''}">#${rank}</div>
            <div class="user-col">
                <div class="user-avatar-small">
                    <i class="${user.avatar}"></i>
                </div>
                <div class="user-info-small">
                    <div class="user-name-small">${user.name}</div>
                    <div class="user-rank-small">${getRankFromXp(user.xp)}</div>
                </div>
            </div>
            <div class="level-col">${user.level}</div>
            <div class="xp-col">${user.xp.toLocaleString()}</div>
            <div class="streak-col">
                <i class="fas fa-fire"></i> ${user.streak}
            </div>
            <div class="badges-col">
                <i class="fas fa-medal"></i> ${user.badges}
            </div>
        `;
        
        DOM.leaderboardRows.appendChild(row);
    });
    
    // Update user position
    const userPosition = data.findIndex(user => user.id === AppState.user.id) + 1 || data.length + 1;
    DOM.userRank.textContent = userPosition;
    DOM.userPositionName.textContent = AppState.user.name;
    DOM.userPositionXp.textContent = AppState.user.totalXp.toLocaleString();
}

// Get rank from XP
function getRankFromXp(xp) {
    for (let i = RANK_THRESHOLDS.length - 1; i >= 0; i--) {
        if (xp >= RANK_THRESHOLDS[i].xp) {
            return RANK_THRESHOLDS[i].rank;
        }
    }
    return "Beginner";
}

// Update achievements
function updateAchievements() {
    // Calculate unlocked achievements
    const unlockedCount = AppState.achievements.filter(ach => ach.unlocked).length;
    const totalCount = AppState.achievements.length;
    const completionRate = Math.round((unlockedCount / totalCount) * 100);
    
    DOM.totalBadges.textContent = unlockedCount;
    DOM.totalAchievements.textContent = unlockedCount;
    DOM.completionRate.textContent = `${completionRate}%`;
    
    // Render achievements grid
    DOM.achievementsGrid.innerHTML = '';
    
    AppState.achievements.forEach(achievement => {
        const achievementCard = document.createElement('div');
        achievementCard.className = `achievement-card ${achievement.unlocked ? '' : 'locked'}`;
        achievementCard.innerHTML = `
            <div class="achievement-icon">
                <i class="${achievement.icon}"></i>
            </div>
            <div class="achievement-status ${achievement.unlocked ? 'unlocked' : 'locked'}">
                <i class="fas fa-${achievement.unlocked ? 'check' : 'lock'}"></i>
            </div>
            <h4 class="achievement-title">${achievement.title}</h4>
            <p class="achievement-description">${achievement.description}</p>
            <div class="achievement-xp">+${achievement.xp} XP</div>
        `;
        
        DOM.achievementsGrid.appendChild(achievementCard);
    });
}

// Update global stats
function updateStats() {
    // These would normally come from a backend
    DOM.totalLearners.textContent = "12,847";
    DOM.totalQuestionsStat.textContent = "58,632";
    DOM.totalXpEarned.textContent = "2.1M";
}

// Check and update streak
function checkStreakUpdate() {
    const today = new Date().toISOString().split('T')[0];
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    const yesterdayStr = yesterday.toISOString().split('T')[0];
    
    if (AppState.user.lastLogin === yesterdayStr) {
        // User logged in yesterday, increment streak
        AppState.user.streak++;
        DOM.streakDisplay.textContent = AppState.user.streak;
        showToast("Streak Updated", `You're on a ${AppState.user.streak}-day streak!`, "success");
    } else if (AppState.user.lastLogin !== today) {
        // User missed a day, reset streak
        AppState.user.streak = 1;
        DOM.streakDisplay.textContent = AppState.user.streak;
        showToast("New Streak Started", "Start a new learning streak today!", "info");
    }
    
    // Update last login date
    AppState.user.lastLogin = today;
    saveState();
}

// Setup event listeners
function setupEventListeners() {
    // Subject start buttons
    DOM.subjectStartBtns.forEach(button => {
        button.addEventListener('click', () => {
            const subject = button.getAttribute('data-subject');
            startQuiz(subject);
        });
    });
    
    // Start learning button
    DOM.startLearningBtn.addEventListener('click', () => {
        // Start with Computer Science by default
        startQuiz('cs');
    });
    
    // Explore subjects button
    DOM.exploreSubjectsBtn.addEventListener('click', () => {
        document.getElementById('subjects').scrollIntoView({ behavior: 'smooth' });
    });
    
    // Close quiz button
    DOM.closeQuizBtn.addEventListener('click', closeQuiz);
    
    // Next question button
    DOM.nextQuestionBtn.addEventListener('click', nextQuestion);
    
    // Level up modal close button
    DOM.levelUpCloseBtn.addEventListener('click', () => {
        DOM.levelUpModal.classList.remove('active');
    });
    
    // Leaderboard tabs
    DOM.leaderboardTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Update active tab
            DOM.leaderboardTabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            
            // Update leaderboard period
            AppState.leaderboard.period = tab.getAttribute('data-period');
            updateLeaderboard();
        });
    });
    
    // Leaderboard search
    DOM.leaderboardSearch.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const rows = DOM.leaderboardRows.querySelectorAll('.leaderboard-row:not(.header-row)');
        
        rows.forEach(row => {
            const userName = row.querySelector('.user-name-small').textContent.toLowerCase();
            if (userName.includes(searchTerm)) {
                row.style.display = 'grid';
            } else {
                row.style.display = 'none';
            }
        });
    });
    
    // Mobile menu button
    DOM.mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    
    // Navigation links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Scroll to target
                targetElement.scrollIntoView({ behavior: 'smooth' });
                
                // Close mobile menu if open
                closeMobileMenu();
            }
        });
    });
    
    // Smooth scroll for footer links
    document.querySelectorAll('.footer-link').forEach(link => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href');
            if (href.startsWith('#')) {
                e.preventDefault();
                const targetElement = document.querySelector(href);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });
    });
}

// Toggle mobile menu
function toggleMobileMenu() {
    const navMenu = document.querySelector('.nav-menu');
    navMenu.style.display = navMenu.style.display === 'flex' ? 'none' : 'flex';
    
    if (navMenu.style.display === 'flex') {
        navMenu.style.flexDirection = 'column';
        navMenu.style.position = 'absolute';
        navMenu.style.top = '100%';
        navMenu.style.left = '0';
        navMenu.style.width = '100%';
        navMenu.style.backgroundColor = 'var(--bg-darker)';
        navMenu.style.padding = 'var(--spacing-md)';
        navMenu.style.borderTop = '1px solid var(--border-color)';
        navMenu.style.zIndex = '1000';
    }
}

// Close mobile menu
function closeMobileMenu() {
    const navMenu = document.querySelector('.nav-menu');
    navMenu.style.display = 'none';
}

// Start a quiz for a subject
function startQuiz(subject) {
    if (AppState.quiz.active) return;
    
    AppState.quiz.active = true;
    AppState.quiz.subject = subject;
    AppState.quiz.level = AppState.subjects[subject].currentLevel;
    AppState.quiz.questions = getQuestionsForSubject(subject, AppState.quiz.level);
    AppState.quiz.currentQuestionIndex = 0;
    AppState.quiz.score = 0;
    AppState.quiz.xpEarned = 0;
    AppState.quiz.correctStreak = 0;
    
    // Update quiz modal UI
    DOM.quizSubjectTitle.textContent = AppState.subjects[subject].name;
    DOM.quizLevel.textContent = AppState.quiz.level;
    DOM.totalQuestions.textContent = AppState.quiz.questions.length;
    
    // Show quiz modal
    DOM.quizModal.classList.add('active');
    
    // Start timer
    startQuizTimer();
    
    // Load first question
    loadQuestion();
}

// Get questions for a subject and level
function getQuestionsForSubject(subject, level) {
    const allQuestions = QUESTION_DATABASE[subject] || [];
    const difficulty = Math.min(Math.ceil(level / 3), 3);
    
    // Filter questions by difficulty and shuffle
    const filteredQuestions = allQuestions.filter(q => q.difficulty <= difficulty);
    const shuffled = [...filteredQuestions].sort(() => Math.random() - 0.5);
    
    // Return 5 questions
    return shuffled.slice(0, 5);
}

// Start quiz timer
function startQuizTimer() {
    AppState.quiz.timer = 60;
    DOM.quizTimer.textContent = AppState.quiz.timer;
    
    AppState.quiz.timerInterval = setInterval(() => {
        AppState.quiz.timer--;
        DOM.quizTimer.textContent = AppState.quiz.timer;
        
        if (AppState.quiz.timer <= 0) {
            clearInterval(AppState.quiz.timerInterval);
            handleTimeUp();
        }
    }, 1000);
}

// Handle time up
function handleTimeUp() {
    showFeedback("Time's up! The correct answer was selected for you.", false);
    markCorrectAnswer();
    disableOptions();
    DOM.nextQuestionBtn.style.display = 'block';
}

// Load current question
function loadQuestion() {
    if (AppState.quiz.currentQuestionIndex >= AppState.quiz.questions.length) {
        finishQuiz();
        return;
    }
    
    const question = AppState.quiz.questions[AppState.quiz.currentQuestionIndex];
    
    // Update UI
    DOM.currentQuestion.textContent = AppState.quiz.currentQuestionIndex + 1;
    DOM.questionText.textContent = question.question;
    DOM.questionType.textContent = question.type === 'mcq' ? 'Multiple Choice' : 'True/False';
    
    // Update progress bar
    const progress = ((AppState.quiz.currentQuestionIndex) / AppState.quiz.questions.length) * 100;
    DOM.quizProgressFill.style.width = `${progress}%`;
    
    // Clear previous options
    DOM.quizOptions.innerHTML = '';
    DOM.quizFeedback.classList.remove('active');
    
    // Load options based on question type
    if (question.type === 'mcq') {
        question.options.forEach((option, index) => {
            const optionElement = document.createElement('button');
            optionElement.className = 'quiz-option';
            optionElement.textContent = option;
            optionElement.setAttribute('data-index', index);
            optionElement.addEventListener('click', () => selectOption(optionElement, index));
            DOM.quizOptions.appendChild(optionElement);
        });
    } else {
        // True/False question
        const trueOption = document.createElement('button');
        trueOption.className = 'quiz-option';
        trueOption.textContent = 'True';
        trueOption.setAttribute('data-index', 'true');
        trueOption.addEventListener('click', () => selectOption(trueOption, true));
        
        const falseOption = document.createElement('button');
        falseOption.className = 'quiz-option';
        falseOption.textContent = 'False';
        falseOption.setAttribute('data-index', 'false');
        falseOption.addEventListener('click', () => selectOption(falseOption, false));
        
        DOM.quizOptions.appendChild(trueOption);
        DOM.quizOptions.appendChild(falseOption);
    }
}

// Select an option
function selectOption(optionElement, selectedIndex) {
    if (DOM.quizFeedback.classList.contains('active')) return;
    
    const question = AppState.quiz.questions[AppState.quiz.currentQuestionIndex];
    const isCorrect = question.type === 'mcq' 
        ? selectedIndex === question.correctAnswer
        : selectedIndex === question.correctAnswer;
    
    // Mark selected option
    optionElement.classList.add('selected');
    
    // Show feedback
    if (isCorrect) {
        AppState.quiz.score++;
        AppState.quiz.correctStreak++;
        DOM.quizScore.textContent = AppState.quiz.score;
        
        // Calculate XP earned
        const baseXp = question.xp;
        const streakBonus = Math.min(AppState.quiz.correctStreak - 1, 5) * 5;
        const timeBonus = Math.max(Math.floor(AppState.quiz.timer / 10), 0) * 5;
        const xpEarned = baseXp + streakBonus + timeBonus;
        
        AppState.quiz.xpEarned += xpEarned;
        DOM.xpEarned.textContent = AppState.quiz.xpEarned;
        
        showFeedback(`${question.explanation}<br><br>+${xpEarned} XP (${baseXp} base + ${streakBonus} streak + ${timeBonus} time)`, true);
        
        // Show XP notification
        showXpNotification(xpEarned);
    } else {
        AppState.quiz.correctStreak = 0;
        showFeedback(`${question.explanation}<br><br>Correct answer: ${question.type === 'mcq' ? question.options[question.correctAnswer] : question.correctAnswer}`, false);
        markCorrectAnswer();
    }
    
    // Disable all options
    disableOptions();
    
    // Show next question button
    DOM.nextQuestionBtn.style.display = 'block';
}

// Mark the correct answer
function markCorrectAnswer() {
    const question = AppState.quiz.questions[AppState.quiz.currentQuestionIndex];
    
    if (question.type === 'mcq') {
        const correctOption = DOM.quizOptions.querySelector(`[data-index="${question.correctAnswer}"]`);
        if (correctOption) {
            correctOption.classList.add('correct');
        }
        
        // Mark incorrect if selected
        const selectedOption = DOM.quizOptions.querySelector('.selected');
        if (selectedOption && selectedOption.getAttribute('data-index') != question.correctAnswer) {
            selectedOption.classList.add('incorrect');
        }
    } else {
        // True/False question
        const correctOption = DOM.quizOptions.querySelector(`[data-index="${question.correctAnswer}"]`);
        if (correctOption) {
            correctOption.classList.add('correct');
        }
        
        // Mark incorrect if selected
        const selectedOption = DOM.quizOptions.querySelector('.selected');
        if (selectedOption && selectedOption.getAttribute('data-index') != question.correctAnswer) {
            selectedOption.classList.add('incorrect');
        }
    }
}

// Disable all options
function disableOptions() {
    const options = DOM.quizOptions.querySelectorAll('.quiz-option');
    options.forEach(option => {
        option.style.pointerEvents = 'none';
    });
}

// Show feedback
function showFeedback(message, isCorrect) {
    DOM.feedbackContent.innerHTML = isCorrect 
        ? `<i class="fas fa-check-circle" style="color: var(--success-color); margin-right: 10px;"></i> ${message}`
        : `<i class="fas fa-times-circle" style="color: var(--danger-color); margin-right: 10px;"></i> ${message}`;
    
    DOM.quizFeedback.classList.add('active');
    DOM.nextQuestionBtn.style.display = 'block';
}

// Move to next question
function nextQuestion() {
    AppState.quiz.currentQuestionIndex++;
    DOM.nextQuestionBtn.style.display = 'none';
    loadQuestion();
}

// Finish quiz
function finishQuiz() {
    clearInterval(AppState.quiz.timerInterval);
    
    // Calculate final XP
    const perfectBonus = AppState.quiz.score === AppState.quiz.questions.length ? 100 : 0;
    const finalXp = AppState.quiz.xpEarned + perfectBonus;
    
    // Update user stats
    const oldLevel = AppState.user.level;
    const oldRank = AppState.user.rank;
    
    AppState.user.xp += finalXp;
    AppState.user.totalXp += finalXp;
    AppState.user.points += AppState.quiz.score * 10;
    AppState.user.learningTime += 0.5; // Add 30 minutes of learning time
    
    // Check for level up
    checkLevelUp(oldLevel);
    
    // Check for rank up
    checkRankUp(oldRank);
    
    // Update subject progress
    const subject = AppState.quiz.subject;
    const questionsAnswered = AppState.quiz.questions.length;
    const correctAnswers = AppState.quiz.score;
    
    AppState.subjects[subject].questionsAnswered += questionsAnswered;
    AppState.subjects[subject].progress = Math.min(
        Math.round((AppState.subjects[subject].questionsAnswered / AppState.subjects[subject].totalQuestions) * 100),
        100
    );
    
    // Update current level for the subject if they did well
    if (correctAnswers >= questionsAnswered * 0.8) {
        AppState.subjects[subject].currentLevel = Math.min(
            AppState.subjects[subject].currentLevel + 1,
            AppState.subjects[subject].levels
        );
    }
    
    // Check for achievements
    checkAchievements();
    
    // Save state
    saveState();
    
    // Update UI
    updateUserStats();
    updateProgressBars();
    updateLevelProgress();
    
    // Show completion message
    DOM.feedbackContent.innerHTML = `
        <h3>Quiz Complete!</h3>
        <p>You scored <strong>${AppState.quiz.score}/${AppState.quiz.questions.length}</strong> correct answers.</p>
        <p>You earned <strong>${finalXp} XP</strong>${perfectBonus > 0 ? ` (including ${perfectBonus} perfect bonus!)` : ''}.</p>
        <p>Your current streak: <strong>${AppState.quiz.correctStreak}</strong> correct answers in a row.</p>
    `;
    
    DOM.quizFeedback.classList.add('active');
    DOM.nextQuestionBtn.textContent = 'Finish Quiz';
    DOM.nextQuestionBtn.removeEventListener('click', nextQuestion);
    DOM.nextQuestionBtn.addEventListener('click', closeQuiz, { once: true });
    
    // Update progress bar to 100%
    DOM.quizProgressFill.style.width = '100%';
}

// Check for level up
function checkLevelUp(oldLevel) {
    const newLevel = calculateLevelFromXp(AppState.user.xp);
    
    if (newLevel > oldLevel) {
        AppState.user.level = newLevel;
        showLevelUpModal(newLevel);
    }
}

// Calculate level from XP
function calculateLevelFromXp(xp) {
    for (let i = XP_REQUIREMENTS.length - 1; i >= 0; i--) {
        if (xp >= XP_REQUIREMENTS[i]) {
            return i + 1;
        }
    }
    return 1;
}

// Check for rank up
function checkRankUp(oldRank) {
    const newRank = getRankFromXp(AppState.user.totalXp);
    
    if (newRank !== oldRank) {
        AppState.user.rank = newRank;
        showToast("Rank Up!", `You've been promoted to ${newRank}!`, "success");
    }
}

// Check for achievements
function checkAchievements() {
    let newAchievements = [];
    
    // Check for "First Steps" achievement
    if (!AppState.achievements[0].unlocked) {
        AppState.achievements[0].unlocked = true;
        newAchievements.push(AppState.achievements[0]);
    }
    
    // Check for "Quick Learner" achievement (10 correct answers total)
    const totalCorrectAnswers = Object.values(AppState.subjects).reduce(
        (sum, subject) => sum + Math.floor(subject.questionsAnswered * (subject.progress / 100)), 
        0
    );
    
    if (totalCorrectAnswers >= 10 && !AppState.achievements[1].unlocked) {
        AppState.achievements[1].unlocked = true;
        newAchievements.push(AppState.achievements[1]);
    }
    
    // Check for "Streak Keeper" achievement
    if (AppState.user.streak >= 7 && !AppState.achievements[3].unlocked) {
        AppState.achievements[3].unlocked = true;
        newAchievements.push(AppState.achievements[3]);
    }
    
    // Show notifications for new achievements
    newAchievements.forEach(achievement => {
        showToast("Achievement Unlocked!", `${achievement.title} - ${achievement.description}`, "success");
    });
    
    // Update achievements UI if any were unlocked
    if (newAchievements.length > 0) {
        updateAchievements();
    }
}

// Close quiz
function closeQuiz() {
    DOM.quizModal.classList.remove('active');
    AppState.quiz.active = false;
    
    // Reset next question button
    DOM.nextQuestionBtn.textContent = 'Next Question';
    DOM.nextQuestionBtn.removeEventListener('click', closeQuiz);
    DOM.nextQuestionBtn.addEventListener('click', nextQuestion);
}

// Show XP notification
function showXpNotification(xp) {
    DOM.xpNotification.querySelector('.xp-notification-title').textContent = `+${xp} XP Earned!`;
    DOM.xpNotification.querySelector('.xp-notification-subtitle').textContent = 
        AppState.quiz.correctStreak > 1 ? `${AppState.quiz.correctStreak} correct answers in a row!` : 'Correct answer!';
    
    DOM.xpNotification.classList.add('show');
    
    setTimeout(() => {
        DOM.xpNotification.classList.remove('show');
    }, 3000);
}

// Show level up modal
function showLevelUpModal(newLevel) {
    DOM.newLevel.textContent = newLevel;
    DOM.levelUpModal.classList.add('active');
}

// Show toast notification
function showToast(title, message, type = "info") {
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.innerHTML = `
        <div class="toast-icon">
            <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
        </div>
        <div class="toast-content">
            <div class="toast-title">${title}</div>
            <div class="toast-message">${message}</div>
        </div>
    `;
    
    DOM.toastContainer.appendChild(toast);
    
    // Show toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 10);
    
    // Remove toast after 5 seconds
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 500);
    }, 5000);
}

// Initialize the app when the DOM is loaded
document.addEventListener('DOMContentLoaded', initApp);
